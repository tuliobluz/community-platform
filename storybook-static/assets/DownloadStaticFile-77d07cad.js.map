{"version":3,"file":"DownloadStaticFile-77d07cad.js","sources":["../../src/DownloadStaticFile/DownloadStaticFile.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Flex, Text } from 'theme-ui'\n\nimport { ExternalLink } from '../ExternalLink/ExternalLink'\nimport { Icon } from '../Icon/Icon'\nimport { Tooltip } from '../Tooltip/Tooltip'\n\nimport type { availableGlyphs } from '../Icon/types'\n\nexport interface IProps {\n  file: {\n    name: string\n    size: number\n    downloadUrl?: string | undefined\n  }\n  allowDownload?: boolean\n  handleClick?: () => Promise<void>\n  redirectToSignIn?: () => Promise<void>\n}\n\nconst FileDetails = (props: {\n  file: {\n    name: string\n  }\n  glyph: availableGlyphs\n  size: string\n  redirectToSignIn?: () => Promise<void>\n}) => {\n  const { file, glyph, size, redirectToSignIn } = props\n\n  return (\n    <>\n      <Flex\n        p={2}\n        mb={1}\n        sx={{\n          borderRadius: 1,\n          border: '2px solid black',\n          background: 'accent.base',\n          color: 'black',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          flexDirection: 'row',\n          width: '300px',\n          cursor: 'pointer',\n        }}\n        onClick={() => redirectToSignIn && redirectToSignIn()}\n        data-tip={redirectToSignIn ? 'Login to download' : ''}\n      >\n        <Icon size={24} glyph={glyph} mr={3} />\n        <Text\n          sx={{\n            flex: 1,\n            fontSize: 1,\n            whiteSpace: 'nowrap',\n            textOverflow: 'ellipsis',\n            overflow: 'hidden',\n          }}\n          mr={3}\n        >\n          {file.name}\n        </Text>\n        <Text sx={{ fontSize: 1 }}>{size}</Text>\n      </Flex>\n      <Tooltip />\n    </>\n  )\n}\n\nexport const DownloadStaticFile = ({\n  file,\n  allowDownload,\n  handleClick,\n  redirectToSignIn,\n}: IProps) => {\n  const size = bytesToSize(file.size || 0)\n\n  if (!file) {\n    return null\n  }\n\n  return (\n    <>\n      {allowDownload && file.downloadUrl && !redirectToSignIn ? (\n        <ExternalLink\n          m={1}\n          onClick={() => handleClick && handleClick()}\n          href={file.downloadUrl}\n          download={file.name}\n          style={{ width: '300px', marginLeft: 0 }}\n        >\n          <FileDetails file={file} glyph=\"download-cloud\" size={size} />\n        </ExternalLink>\n      ) : (\n        <FileDetails\n          file={file}\n          glyph=\"download-cloud\"\n          size={size}\n          redirectToSignIn={redirectToSignIn}\n        />\n      )}\n    </>\n  )\n}\n\nconst bytesToSize = (bytes: number) => {\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n  if (bytes === 0) {\n    return '0 Bytes'\n  }\n  const i = Number(Math.floor(Math.log(bytes) / Math.log(1024)))\n  return (bytes / Math.pow(1024, i)).toPrecision(3) + ' ' + sizes[i]\n}\n"],"names":["FileDetails","props","file","glyph","size","redirectToSignIn","jsxs","Fragment","Flex","jsx","Icon","Text","Tooltip","DownloadStaticFile","allowDownload","handleClick","bytesToSize","ExternalLink","bytes","sizes","i"],"mappings":"6PAoBA,MAAAA,EAAAC,GAAA,CAQE,KAAA,CAAA,KAAAC,EAAA,MAAAC,EAAA,KAAAC,EAAA,iBAAAC,CAAA,EAAAJ,EAEA,OAAAK,EAAAC,EAAA,CAAA,SAAA,CAEID,EAAAE,EAAC,CAAA,EAAA,EACI,GAAA,EACC,GAAA,CACA,aAAA,EACY,OAAA,kBACN,WAAA,cACI,MAAA,QACL,eAAA,gBACS,WAAA,SACJ,cAAA,MACG,MAAA,QACR,OAAA,SACC,EACV,QAAA,IAAAH,GAAAA,EAAA,EACoD,WAAAA,EAAA,oBAAA,GACD,SAAA,CAEnDI,EAAAC,EAAA,CAAA,KAAA,GAAA,MAAAP,EAAA,GAAA,EAAA,EAAqCM,EACrCE,EAAC,CAAA,GAAA,CACK,KAAA,EACI,SAAA,EACI,WAAA,SACE,aAAA,WACE,SAAA,QACJ,EACZ,GAAA,EACI,SAAAT,EAAA,IAEE,CAAA,EACRO,EAAAE,EAAA,CAAA,GAAA,CAAA,SAAA,CAAA,EAAA,SAAAP,EAAA,CACiC,CAAA,CAAA,EACnCK,EAAAG,EAAA,EAAA,CACS,CAAA,CAAA,CAGf,EAEOC,EAAA,CAAA,CAA4B,KAAAX,EACjC,cAAAY,EACA,YAAAC,EACA,iBAAAV,CAEF,IAAA,CACE,MAAAD,EAAAY,EAAAd,EAAA,MAAA,CAAA,EAEA,OAAAA,EAIAO,EAAAF,EAAA,CAAA,SAAAO,GAAAZ,EAAA,aAAA,CAAAG,EAAAI,EAGMQ,EAAC,CAAA,EAAA,EACI,QAAA,IAAAF,GAAAA,EAAA,EACuC,KAAAb,EAAA,YAC/B,SAAAA,EAAA,KACI,MAAA,CAAA,MAAA,QAAA,WAAA,CAAA,EACwB,SAAAO,EAAAT,EAAA,CAAA,KAAAE,EAAA,MAAA,iBAAA,KAAAE,EAAA,CAEqB,CAAA,EAAAK,EAG9DT,EAAC,CAAA,KAAAE,EACC,MAAA,iBACM,KAAAE,EACN,iBAAAC,CACA,CAAA,CAAA,CAAA,EApBN,IAyBJ,EAEAW,EAAAE,GAAA,CACE,MAAAC,EAAA,CAAA,QAAA,KAAA,KAAA,KAAA,IAAA,EACA,GAAAD,IAAA,EACE,MAAA,UAEF,MAAAE,EAAA,OAAA,KAAA,MAAA,KAAA,IAAAF,CAAA,EAAA,KAAA,IAAA,IAAA,CAAA,CAAA,EACA,OAAAA,EAAA,KAAA,IAAA,KAAAE,CAAA,GAAA,YAAA,CAAA,EAAA,IAAAD,EAAAC,CAAA,CACF"}