{"version":3,"file":"ResearchEditorOverview-22e51d99.js","sources":["../../src/ResearchEditorOverview/ResearchEditorOverview.tsx"],"sourcesContent":["import { Box, Card, Heading, Text } from 'theme-ui'\nimport { boolean, object, string } from 'yup'\n\nimport { Button } from '../Button/Button'\nimport { InternalLink } from '../InternalLink/InternalLink'\n\nimport type { ThemeUIStyleObject } from 'theme-ui'\n\nexport type ResearchEditorOverviewUpdate = {\n  isActive: boolean\n  title: string\n  status: 'draft' | 'published'\n  slug: string | null\n}\n\nexport interface ResearchEditorOverviewProps {\n  updates: ResearchEditorOverviewUpdate[]\n  researchSlug: string\n  newItemTitle?: string\n  showCreateUpdateButton?: boolean\n  showBackToResearchButton?: boolean\n  sx?: ThemeUIStyleObject\n}\n\nconst updateSchema = object({\n  isActive: boolean().required(),\n  title: string().required(),\n  status: string().optional(),\n  slug: string().nullable(),\n})\n\nexport const ResearchEditorOverview = (props: ResearchEditorOverviewProps) => {\n  const {\n    updates,\n    sx,\n    researchSlug,\n    showCreateUpdateButton,\n    showBackToResearchButton,\n  } = props\n  return (\n    <Card sx={{ p: 4, ...sx }}>\n      <Heading as=\"h2\" mb={3} variant=\"small\">\n        Research overview\n      </Heading>\n      {updates?.length ? (\n        <Box as={'ul'} sx={{ margin: 0, mb: 4, p: 0, pl: 3 }}>\n          {updates\n            .filter((update) => updateSchema.isValidSync(update))\n            .map((update, index) => (\n              <Box as={'li'} key={index} sx={{ mb: 1 }}>\n                <Text variant={'quiet'}>\n                  {update.status === 'draft' ? (\n                    <Text\n                      sx={{\n                        display: 'inline-block',\n                        verticalAlign: 'middle',\n                        color: 'black',\n                        fontSize: 1,\n                        whiteSpace: 'nowrap',\n                        textOverflow: 'ellipsis',\n                        overflow: 'hidden',\n                        background: 'accent.base',\n                        padding: 1,\n                        borderRadius: 1,\n                        borderBottomRightRadius: 1,\n                        mr: 1,\n                      }}\n                    >\n                      Draft\n                    </Text>\n                  ) : null}\n                  {update.isActive ? (\n                    <strong>{update.title}</strong>\n                  ) : (\n                    <>\n                      {update.title}\n                      {update.slug ? (\n                        <InternalLink\n                          to={`/research/${researchSlug}/edit-update/${update.slug}`}\n                          sx={{ display: 'inline-block', ml: 1 }}\n                        >\n                          Edit\n                        </InternalLink>\n                      ) : null}\n                    </>\n                  )}\n                </Text>\n              </Box>\n            ))}\n        </Box>\n      ) : null}\n      {showCreateUpdateButton ? (\n        <Button small sx={{ mr: 2 }} data-cy=\"create-update\">\n          <InternalLink\n            to={`/research/${researchSlug}/new-update`}\n            sx={{ color: 'black' }}\n          >\n            Create update\n          </InternalLink>\n        </Button>\n      ) : null}\n\n      {showBackToResearchButton ? (\n        <Button small variant={'outline'}>\n          <InternalLink\n            to={`/research/${researchSlug}/edit`}\n            sx={{ color: 'black' }}\n          >\n            Back to research\n          </InternalLink>\n        </Button>\n      ) : null}\n    </Card>\n  )\n}\n"],"names":["updateSchema","object","boolean","string","ResearchEditorOverview","props","updates","sx","researchSlug","showCreateUpdateButton","showBackToResearchButton","jsxs","Card","jsx","Heading","Box","update","index","Text","Fragment","InternalLink","Button"],"mappings":"6RAwBA,MAAAA,EAAAC,EAAA,CAA4B,SAAAC,EAAA,EAAA,SAAA,EACG,MAAAC,EAAA,EAAA,SAAA,EACJ,OAAAA,EAAA,EAAA,SAAA,EACC,KAAAA,EAAA,EAAA,SAAA,CAE5B,CAAA,EAEOC,EAAAC,GAAA,CACL,KAAA,CAAM,QAAAC,EACJ,GAAAC,EACA,aAAAC,EACA,uBAAAC,EACA,yBAAAC,CACA,EAAAL,EAEF,OAAAM,EAAAC,EAAA,CAAA,GAAA,CAAA,EAAA,EAAA,GAAAL,CAAA,EAAA,SAAA,CAEIM,EAAAC,EAAA,CAAA,GAAA,KAAA,GAAA,EAAA,QAAA,QAAA,SAAA,mBAAA,CAAA,EAEAR,GAAA,MAAAA,EAAA,OAAAO,EAAAE,EAAA,CAAA,GAAA,KAAA,GAAA,CAAA,OAAA,EAAA,GAAA,EAAA,EAAA,EAAA,GAAA,GAAA,SAAAT,EAAA,OAAAU,GAAAhB,EAAA,YAAAgB,CAAA,CAAA,EAAA,IAAA,CAAAA,EAAAC,IAAAJ,EAAAE,EAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,EAAA,SAAAJ,EAAAO,EAAA,CAAA,QAAA,QAAA,SAAA,CAQaF,EAAA,SAAA,QAAAH,EACCK,EAAC,CAAA,GAAA,CACK,QAAA,eACO,cAAA,SACM,MAAA,QACR,SAAA,EACG,WAAA,SACE,aAAA,WACE,SAAA,SACJ,WAAA,cACE,QAAA,EACH,aAAA,EACK,wBAAA,EACW,GAAA,CACrB,EACN,SAAA,OACD,CAAA,EAAA,KAGCF,EAAA,SAAAH,EAAA,SAAA,CAAA,SAAAG,EAAA,KAAA,CAAA,EAAAL,EAAAQ,EAAA,CAAA,SAAA,CAKCH,EAAA,MAAOA,EAAA,KAAAH,EAENO,EAAC,CAAA,GAAA,aAAAZ,iBAAAQ,EAAA,OACqD,GAAA,CAAA,QAAA,eAAA,GAAA,CAAA,EACf,SAAA,MACtC,CAAA,EAAA,IAGC,EAAA,CACN,CAAA,CAAA,CAAA,EAAAC,CAAA,CAAA,CAAA,CAAA,EAAA,KAMVR,EAAAI,EAAAQ,EAAA,CAAA,MAAA,GAAA,GAAA,CAAA,GAAA,CAAA,EAAA,UAAA,gBAAA,SAAAR,EAGAO,EAAC,CAAA,GAAA,aAAAZ,eACkB,GAAA,CAAA,MAAA,OAAA,EACI,SAAA,eACtB,CAAA,CAAA,CAAA,EAAA,KAIDE,EAAAG,EAAAQ,EAAA,CAAA,MAAA,GAAA,QAAA,UAAA,SAAAR,EAIAO,EAAC,CAAA,GAAA,aAAAZ,SACkB,GAAA,CAAA,MAAA,OAAA,EACI,SAAA,kBACtB,CAAA,CAAA,CAAA,EAAA,IAID,CAAA,CAAA,CAGV"}